{"version":4,"terraform_version":"1.11.4","serial":9,"lineage":"89e22ae2-6bd4-95a5-c591-37f3aa946b87","outputs":{"deploy_command":{"value":"pcluster create-cluster --cluster-name clusterra-demo-26-jan --cluster-configuration ./generated/clusterra-demo-26-jan-config.yaml --region ap-south-1","type":"string"},"pcluster_config_path":{"value":"./generated/clusterra-demo-26-jan-config.yaml","type":"string"}},"resources":[{"module":"module.connectivity","mode":"data","type":"aws_caller_identity","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"account_id":"909742510020","arn":"arn:aws:iam::909742510020:user/n52h53","id":"909742510020","user_id":"AIDA5HUHBB7CM7JDSY3ZN"},"sensitive_attributes":[]}]},{"module":"module.connectivity","mode":"data","type":"aws_instances","name":"head_node","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"filter":[{"name":"instance-state-name","values":["running"]},{"name":"tag:parallelcluster:cluster-name","values":["clusterra-demo-26-jan"]},{"name":"tag:parallelcluster:node-type","values":["HeadNode"]}],"id":"ap-south-1","ids":["i-0ed6a9c9f112fa391"],"instance_state_names":null,"instance_tags":null,"ipv6_addresses":[],"private_ips":["172.31.27.255"],"public_ips":["43.204.138.44"],"region":"ap-south-1","timeouts":null},"sensitive_attributes":[]}]},{"module":"module.connectivity","mode":"data","type":"aws_region","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"description":"Asia Pacific (Mumbai)","endpoint":"ec2.ap-south-1.amazonaws.com","id":"ap-south-1","name":"ap-south-1","region":"ap-south-1"},"sensitive_attributes":[]}]},{"module":"module.connectivity","mode":"data","type":"aws_vpc","name":"selected","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ec2:ap-south-1:909742510020:vpc/vpc-5f392937","cidr_block":"172.31.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-d7ae9abf","cidr_block":"172.31.0.0/16","state":"associated"}],"default":true,"dhcp_options_id":"dopt-1e2ed175","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":null,"id":"vpc-5f392937","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-fc5d8b97","owner_id":"909742510020","region":"ap-south-1","state":null,"tags":{},"timeouts":null},"sensitive_attributes":[]}]},{"module":"module.connectivity","mode":"managed","type":"aws_iam_role","name":"clusterra_access","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::909742510020:role/clusterra-access-clusterra-demo-26-jan","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"StringEquals\":{\"sts:ExternalId\":\"clusterra-clusterra-demo-26-jan\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::306847926740:root\"}}],\"Version\":\"2012-10-17\"}","create_date":"2026-01-26T08:53:43Z","description":"","force_detach_policies":false,"id":"clusterra-access-clusterra-demo-26-jan","inline_policy":[{"name":"clusterra-ec2-access","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"DescribeAllInstances\"},{\"Action\":[\"ec2:StartInstances\",\"ec2:StopInstances\"],\"Condition\":{\"StringEquals\":{\"ec2:ResourceTag/parallelcluster:cluster-name\":\"clusterra-demo-26-jan\"}},\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"ManageClusterInstances\"}]}"},{"name":"clusterra-secrets-access","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7\",\"Sid\":\"ReadJWTSecret\"}]}"}],"managed_policy_arns":[],"max_session_duration":3600,"name":"clusterra-access-clusterra-demo-26-jan","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Cluster":"clusterra-demo-26-jan","ManagedBy":"OpenTOFU","Name":"clusterra-access-clusterra-demo-26-jan"},"tags_all":{"Cluster":"clusterra-demo-26-jan","ManagedBy":"OpenTOFU","Name":"clusterra-access-clusterra-demo-26-jan"},"unique_id":"AROA5HUHBB7CCITJGVUB3"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.connectivity","mode":"managed","type":"aws_iam_role_policy","name":"ec2_access","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"clusterra-access-clusterra-demo-26-jan:clusterra-ec2-access","name":"clusterra-ec2-access","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"DescribeAllInstances\"},{\"Action\":[\"ec2:StartInstances\",\"ec2:StopInstances\"],\"Condition\":{\"StringEquals\":{\"ec2:ResourceTag/parallelcluster:cluster-name\":\"clusterra-demo-26-jan\"}},\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"ManageClusterInstances\"}]}","role":"clusterra-access-clusterra-demo-26-jan"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.connectivity.aws_iam_role.clusterra_access"]}]},{"module":"module.connectivity","mode":"managed","type":"aws_iam_role_policy","name":"secrets_access","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"clusterra-access-clusterra-demo-26-jan:clusterra-secrets-access","name":"clusterra-secrets-access","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7\",\"Sid\":\"ReadJWTSecret\"}]}","role":"clusterra-access-clusterra-demo-26-jan"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.connectivity.aws_iam_role.clusterra_access","module.connectivity.aws_secretsmanager_secret.slurm_jwt"]}]},{"module":"module.connectivity","mode":"managed","type":"aws_lb_target_group","name":"slurm_api","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:elasticloadbalancing:ap-south-1:909742510020:targetgroup/clusterra-tg-cust-933c1c7a/dccae73dd6377bdd","arn_suffix":"targetgroup/clusterra-tg-cust-933c1c7a/dccae73dd6377bdd","connection_termination":false,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"","path":"","port":"6830","protocol":"TCP","timeout":10,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:ap-south-1:909742510020:targetgroup/clusterra-tg-cust-933c1c7a/dccae73dd6377bdd","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":null,"load_balancing_anomaly_mitigation":null,"load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"clusterra-tg-cust-933c1c7a","name_prefix":"","port":6830,"preserve_client_ip":"true","protocol":"TCP","protocol_version":null,"proxy_protocol_v2":false,"region":"ap-south-1","slow_start":0,"stickiness":[{"cookie_duration":0,"cookie_name":"","enabled":false,"type":"source_ip"}],"tags":{"ManagedBy":"OpenTOFU","Name":"clusterra-tg-clusterra-demo-26-jan"},"tags_all":{"ManagedBy":"OpenTOFU","Name":"clusterra-tg-clusterra-demo-26-jan"},"target_control_port":0,"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":true,"unhealthy_draining_interval":0}],"target_type":"instance","vpc_id":"vpc-5f392937"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.connectivity","mode":"managed","type":"aws_lb_target_group_attachment","name":"head_node","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"availability_zone":null,"id":"arn:aws:elasticloadbalancing:ap-south-1:909742510020:targetgroup/clusterra-tg-cust-933c1c7a/dccae73dd6377bdd-20260126085342662900000003","port":6830,"quic_server_id":null,"region":"ap-south-1","target_group_arn":"arn:aws:elasticloadbalancing:ap-south-1:909742510020:targetgroup/clusterra-tg-cust-933c1c7a/dccae73dd6377bdd","target_id":"i-0ed6a9c9f112fa391"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.connectivity.aws_lb_target_group.slurm_api","module.connectivity.data.aws_instances.head_node"]}]},{"module":"module.connectivity","mode":"managed","type":"aws_secretsmanager_secret","name":"slurm_jwt","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7","description":"Slurm JWT HS256 key for Clusterra authentication","force_overwrite_replica_secret":false,"id":"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7","kms_key_id":"","name":"clusterra-slurm-jwt-clusterra-demo-26-jan","name_prefix":"","policy":"","recovery_window_in_days":30,"region":"ap-south-1","replica":[],"tags":{"ManagedBy":"OpenTOFU","Purpose":"Clusterra Slurm authentication"},"tags_all":{"ManagedBy":"OpenTOFU","Purpose":"Clusterra Slurm authentication"}},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.connectivity","mode":"managed","type":"aws_secretsmanager_secret_version","name":"slurm_jwt","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7","has_secret_string_wo":null,"id":"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7|terraform-20260126085341832200000002","region":"ap-south-1","secret_binary":"","secret_id":"arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-slurm-jwt-clusterra-demo-26-jan-n35tE7","secret_string":"qgpswA8uGPv5JpLc61pn2oryemQf4QgV9nZY7cb2JgnuvGZTLC5VkAl0HcE9WjY0","secret_string_wo":null,"secret_string_wo_version":null,"version_id":"terraform-20260126085341832200000002","version_stages":["AWSCURRENT"]},"sensitive_attributes":[[{"type":"get_attr","value":"secret_binary"}],[{"type":"get_attr","value":"secret_string"}],[{"type":"get_attr","value":"secret_string_wo"}]],"private":"bnVsbA==","dependencies":["module.connectivity.aws_secretsmanager_secret.slurm_jwt","module.connectivity.random_password.slurm_jwt_key"]}]},{"module":"module.connectivity","mode":"managed","type":"aws_security_group","name":"nlb_target","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:ap-south-1:909742510020:security-group/sg-061bd211798b32ae1","description":"Allow slurmrestd traffic from NLB to head node","egress":[{"cidr_blocks":["172.31.0.0/16"],"description":"Allow all outbound to VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-061bd211798b32ae1","ingress":[{"cidr_blocks":["172.31.0.0/16"],"description":"Allow slurmrestd traffic from VPC (via NLB)","from_port":6830,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":6830}],"name":"clusterra-nlb-sg-clusterra-demo-26-jan","name_prefix":"","owner_id":"909742510020","region":"ap-south-1","revoke_rules_on_delete":false,"tags":{"Cluster":"clusterra-demo-26-jan","ManagedBy":"OpenTOFU","Name":"clusterra-nlb-sg-clusterra-demo-26-jan"},"tags_all":{"Cluster":"clusterra-demo-26-jan","ManagedBy":"OpenTOFU","Name":"clusterra-nlb-sg-clusterra-demo-26-jan"},"timeouts":null,"vpc_id":"vpc-5f392937"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=","dependencies":["module.connectivity.data.aws_vpc.selected"]}]},{"module":"module.connectivity","mode":"managed","type":"aws_vpc_endpoint_service","name":"slurm_api","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"acceptance_required":false,"allowed_principals":["arn:aws:iam::306847926740:root"],"arn":"arn:aws:ec2:ap-south-1:909742510020:vpc-endpoint-service/vpce-svc-0c47b676ef6d570ec","availability_zones":["ap-south-1c"],"base_endpoint_dns_names":["vpce-svc-0c47b676ef6d570ec.ap-south-1.vpce.amazonaws.com"],"gateway_load_balancer_arns":[],"id":"vpce-svc-0c47b676ef6d570ec","manages_vpc_endpoints":false,"network_load_balancer_arns":["arn:aws:elasticloadbalancing:ap-south-1:909742510020:loadbalancer/net/clusterra-cust-993cdfa1/3d8021ccbf609454"],"private_dns_name":"","private_dns_name_configuration":[],"region":"ap-south-1","service_name":"com.amazonaws.vpce.ap-south-1.vpce-svc-0c47b676ef6d570ec","service_type":"Interface","state":"Available","supported_ip_address_types":["ipv4"],"supported_regions":["ap-south-1"],"tags":{"Cluster":"clusterra-demo-26-jan","ManagedBy":"OpenTOFU","Name":"clusterra-cust-993cdfa1"},"tags_all":{"Cluster":"clusterra-demo-26-jan","ManagedBy":"OpenTOFU","Name":"clusterra-cust-993cdfa1"},"timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["module.connectivity.aws_lb.slurm_api","module.connectivity.random_id.customer"]}]},{"module":"module.connectivity","mode":"managed","type":"random_id","name":"customer","provider":"provider[\"registry.opentofu.org/hashicorp/random\"]","instances":[{"schema_version":0,"attributes":{"b64_std":"mTzfoQ==","b64_url":"mTzfoQ","byte_length":4,"dec":"2570903457","hex":"993cdfa1","id":"mTzfoQ","keepers":null,"prefix":null},"sensitive_attributes":[]}]},{"module":"module.connectivity","mode":"managed","type":"random_password","name":"slurm_jwt_key","provider":"provider[\"registry.opentofu.org/hashicorp/random\"]","instances":[{"schema_version":3,"attributes":{"bcrypt_hash":"$2a$10$3Kv2S1Y/4X3hbnpElacMpu23eISM6v0NYzY8c0/ip6r0svykWszn2","id":"none","keepers":null,"length":64,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"result":"qgpswA8uGPv5JpLc61pn2oryemQf4QgV9nZY7cb2JgnuvGZTLC5VkAl0HcE9WjY0","special":false,"upper":true},"sensitive_attributes":[[{"type":"get_attr","value":"bcrypt_hash"}],[{"type":"get_attr","value":"result"}]]}]},{"module":"module.parallelcluster[0]","mode":"data","type":"aws_caller_identity","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"account_id":"909742510020","arn":"arn:aws:iam::909742510020:user/n52h53","id":"909742510020","user_id":"AIDA5HUHBB7CM7JDSY3ZN"},"sensitive_attributes":[]}]},{"module":"module.parallelcluster[0]","mode":"managed","type":"local_file","name":"cluster_config","provider":"provider[\"registry.opentofu.org/hashicorp/local\"]","instances":[{"schema_version":0,"attributes":{"content":"\"HeadNode\":\n  \"InstanceType\": \"t3.medium\"\n  \"LocalStorage\":\n    \"RootVolume\":\n      \"Size\": 50\n  \"Networking\":\n    \"SubnetId\": \"subnet-ce4ffeb5\"\n  \"Ssh\":\n    \"KeyName\": \"demo\"\n\"Image\":\n  \"Os\": \"alinux2023\"\n\"Region\": \"ap-south-1\"\n\"Scheduling\":\n  \"Scheduler\": \"slurm\"\n  \"SlurmQueues\":\n  - \"CapacityType\": \"SPOT\"\n    \"ComputeResources\":\n    - \"InstanceType\": \"c5.xlarge\"\n      \"MaxCount\": 10\n      \"MinCount\": 0\n      \"Name\": \"spot\"\n    \"ComputeSettings\":\n      \"LocalStorage\":\n        \"RootVolume\":\n          \"Size\": 50\n    \"Name\": \"compute\"\n    \"Networking\":\n      \"SubnetIds\":\n      - \"subnet-ce4ffeb5\"\n  \"SlurmSettings\":\n    \"ScaledownIdletime\": 5\n\"SharedStorage\":\n- \"MountDir\": \"/shared\"\n  \"Name\": \"shared\"\n  \"StorageType\": \"Efs\"\n","content_base64":null,"content_base64sha256":"XLgYu5K16nOR7FaVg4Pp2WfEKMvcVlQD9HIe0AbKMbA=","content_base64sha512":"HZW+m9ZyishE7LGsAFezc+LJXc/6QXmVkEs472aYxaJm7WwGxw1hHtCON7h6JeR76DMpeehG4IBI0+lKnYEI1g==","content_md5":"0a85e8ff7c277f869a411db0dbef514e","content_sha1":"a72909e46c61fcae269112b10033d8918117dfde","content_sha256":"5cb818bb92b5ea7391ec56958383e9d967c428cbdc565403f4721ed006ca31b0","content_sha512":"1d95be9bd6728ac844ecb1ac0057b373e2c95dcffa417995904b38ef6698c5a266ed6c06c70d611ed08e37b87a25e47be8332979e846e08048d3e94a9d8108d6","directory_permission":"0777","file_permission":"0777","filename":"./generated/clusterra-demo-26-jan-config.yaml","id":"a72909e46c61fcae269112b10033d8918117dfde","sensitive_content":null,"source":null},"sensitive_attributes":[[{"type":"get_attr","value":"sensitive_content"}]]}]}],"check_results":null}
